<!DOCTYPE html>
<html>
    <head>
        <title>MyRedditAll</title>
        <meta charset="UTF-8" />
        <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/dot-luv/jquery-ui.css" type="text/css" rel="stylesheet" media="screen" />
        <link href="css/autocomplete.css" type="text/css" rel="stylesheet" media="screen" />
        <link href="css/styles.css" type="text/css" rel="stylesheet" media="screen" />
        <link href="css/jquery.contextMenu.css" type="text/css" rel="stylesheet" media="screen" />
        <link href="css/jquery.ad.gallery.css" type="text/css" rel="stylesheet" media="screen" />
        <link href="css/prettyPhoto.css" type="text/css" rel="stylesheet" media="screen" />
        <link href="css/colorpicker.css" type="text/css" rel="stylesheet" media="screen" />
        <link href="css/colorbox.css" type="text/css" rel="stylesheet" media="screen" />
        
        <script src="js/cufon.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script type="text/javascript" charset="ISO-8859-1">
        	Cufon.replace('div.portlet-header a, .cufonize');
        </script>
        
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="https://raw.github.com/jquery/jquery-tmpl/master/jquery.tmpl.min.js" type="text/javascript"></script>
        <script src="js/knockout-1.2.1.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="js/autocomplete.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="js/ZeroClipboard.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="js/jquery.topzindex.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="js/jquery.ad.gallery.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="js/colorpicker.js" type="text/javascript" charset="ISO-8859-1"></script> 
        <script src="js/jquery.colorbox.js" type="text/javascript" charset="ISO-8859-1"></script>
        
<script src="js/font_ParmaPetit.js" type="text/javascript" charset="ISO-8859-1"></script>
        <script src="js/main.js" type="text/javascript" charset="ISO-8859-1"></script>
        
        <script id="imageButtonTemplate" type="text/html">
			{{each(index, imageSection) activeSettings.imageBar}}
			   {{if index < 4 }}
					<button class="changePic fg-button {{if ko.utils.arrayIndexOf(settings.activeSettings.imageBar, imageSection) == 0}}ui-corner-left ui-state-active{{/if}}" onclick="mra.imageBar.changePic(event)" id="${ imageSection }">${ imageSection }</button>
				{{/if}}
			{{/each}}
        </script>
        
        <script id="moreImageButtonTemplate" type="text/html">
			{{each(index, imageSection) activeSettings.imageBar}}
			   {{if index > 3 }}
					<li class="ui-state-default">
						<img class="moreView" src="images/fileTypes/cross.png" width="16" height="16" onclick="deleteImageBar('${ imageSection }'); $(this).parent().fadeOut()">
						<span class="moreText" onclick="mra.imageBar.changePic(event)" id="${ imageSection }">${ imageSection }</span>
					</li>
				{{/if}}
			{{/each}}
        </script>

        <script id="columnTemplate" type="text/html">
            <div class="column" data-bind="template: { name: 'subredditTemplate', foreach: $data }"></div>
        </script>

        <script id="subredditTemplate" type="text/html">
            <div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" title="${ $data }">
                <div class="portlet-header ui-widget-header ui-corner-all">
                    <span class="ui-icon ui-icon-closethick ui-close-display"></span>
                    <span class="ui-icon ui-icon-minusthick ui-toggle-display"></span>
                    <a href="http://www.reddit.com/r/${ $data }" target="_blank">${ $data }</a>
					{{each ['hot','new','controversial','top']}}
						<span class="ui-icon toggleView {{if $index == 0}}ui-icon-bullet{{else}}ui-icon-radio-on{{/if}}" rel="${$value}" title="View ${$value} articles" onclick="mra.news.reloadSection($(this).parent().parent().attr('title'), $(this).attr('rel'))">${$value}</span>
					{{/each}}

				</div>
                <div class="portlet-content"><img src="images/ajaxLoader.gif" align="middle" width="126" height="22"></div>
            </div>
        </script>

		<script type="text/html" id="metaTemplate">
            <li id="metaSection">
                <img class="metaAdd" src="images/fileTypes/add.png" width="16" height="16" onclick="popupAdd(this,'${$data.SECTION}')">
                <img class="metaView" src="images/fileTypes/picture.png" width="16" height="16" onclick="mra.imageBar.changePic('${$data.SECTION}')">
                <span class="metaText" onclick="mra.imageBar.popupWindow( baseurl + '/r/${$data.SECTION}' )">${$data.NAME}</span>
            </li>
        </script>

		<script id="loadMetaButtonTemplate" type="text/html">
            {{each ['active','over18','new','self','media','Favorites']}}
                <button id="${$value}" class="fg-button ui-state-default ui-priority-primary " onclick="mra.imageBar.loadMeta(this.id);">${$value}</button>
            {{/each}} 
        </script>
    </head>
    
   <body data-bind="style: { backgroundColor: getBackgroundColor()? getBackgroundColor(): '', backgroundImage: getBackgroundImage()? 'url(' + getBackgroundImage() + ')': '' }">
        <div id="container">
            <div class="ad-gallery-loading" style="display:none">
                <div style="height:150px; line-height:150px;" class="portlet-content"><img src="images/ajaxLoader.gif" align="middle" width="126" height="22"></div>
            </div>
            <div class="ad-gallery" id="">
                <div class="ad-nav">
                    <div class="ad-thumbs">
                        <ul class="ad-thumb-list"></ul>
                    </div>
                </div>
            </div>
            
            <h2 id="customizeStrip" class="portlet ui-widget-content ui-helper-clearfix ui-corner-all">
                <span class="cufonize">Live Dangerously?</span>
                <a onclick="customizeLayout()" href="javascript:void(0)" class="cufonize" style="color:#9F4">Customize This</a>
                <div class="fg-buttonset fg-buttonset-single" style="float: right; margin-top:3px; margin-right:4px">
                	<span data-bind="template: { name: 'imageButtonTemplate' }"></span>
                    <button class="changePic fg-button ui-corner-right" onclick="$('#metaRedditDialog').dialog('open')">Meta</button>
	                <button data-bind="visible: showMoreMode" id="showMore" class="changePic fg-button ui-corner-right" onclick="mra.imageBar.showMore()"><span class="ui-icon ui-icon-heart" id="heartIcon">&nbsp;</span></button>
                    <ul data-bind="template: { name: 'moreImageButtonTemplate' }" id="showMoreList" class="ui-state-default" style="position:absolute; display:none;"></ul>
                 </div>   
                 <div class="ad-controls"> </div>
            </h2>
            
            <div id="newsSection" data-bind="template: { name: 'columnTemplate', foreach: activeSettings.subreddits }"></div>
        </div>

<div id="metaRedditDialog" title="MetaReddit Picker" style="display:none;">

    <p>
        [<img class="metaAdd" src="images/fileTypes/add.png" align="absmiddle" width="16" height="16"> Add  |
        <img class="metaAdd" src="images/fileTypes/picture.png" align="absmiddle" width="16" height="16"> View In Image Bar |
        (Word) View In Reddit]
    </p>

    <div class="fg-buttonset fg-buttonset-single" style="width:100%;" data-bind="template: { name: 'loadMetaButtonTemplate' }"></div>

    <div style="clear:both">&nbsp;</div>
    
    <ul id="metaRedditList" data-bind="template: { name: 'metaTemplate', foreach: arrMetaReddits }"></ul>	
    
</div>

    
<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" title="" id="newsTemplate" style="display:none;">
    <div class="portlet-header ui-widget-header ui-corner-all">
        <span class="ui-icon ui-icon-closethick ui-close-display"></span>
        <span class="ui-icon ui-icon-minusthick ui-toggle-display"></span>
        <a href="http://www.reddit.com/r/" target="_blank">
            
        </a>

                <span class="ui-icon toggleView ui-icon-bullet" 
                    rel="hot" title="View hot articles" onclick="mra.news.reloadSection($(this).parent().parent().attr('title'), $(this).attr('rel'))">
                                   hot</span>
            
                <span class="ui-icon toggleView ui-icon-radio-on" 
                    rel="new" title="View new articles" onclick="mra.news.reloadSection($(this).parent().parent().attr('title'), $(this).attr('rel'))">
                                   new</span>
            
                <span class="ui-icon toggleView ui-icon-radio-on" 
                    rel="controversial" title="View controversial articles" onclick="mra.news.reloadSection($(this).parent().parent().attr('title'), $(this).attr('rel'))">
                                   controversial</span>
            
        <span class="ui-icon toggleView ui-icon-radio-on" rel="top" title="View top articles" onclick="mra.news.reloadSection($(this).parent().parent().attr('title'), $(this).attr('rel'))">top</span>
    </div>
    <div class="portlet-content"><img src="images/ajaxLoader.gif" width="126" height="22" align="middle"></div>
</div>


<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" style="display:none;" id="popupAdd">
    <div class="portlet-header ui-widget-header ui-corner-all">
        <span class="ui-icon ui-icon-closethick" onClick="$('#popupAdd').fadeOut()" style="margin-top:2px;"></span>
        <a style="font-size:16px;">Add To Column or Image Bar</a>
    </div>
    <div class="portlet-content" style="padding-top:2px;">
        <button name="btnColumn" value="0" class="fg-button ui-state-default ui-priority-primary ui-corner-left" title="Add To The First Column News Blocks">1st</button>
        <button name="btnColumn" value="1" class="fg-button ui-state-default ui-priority-primary" title="Add To The Second Column News Blocks">2nd</button>
        <button name="btnColumn" value="2" class="fg-button ui-state-default ui-priority-primary" title="Add To The Third Column News Blocks">3rd</button>
        <button name="btnColumn" value="3" class="fg-button ui-state-default ui-priority-primary ui-corner-right" title="Add To The Image Bar Strip"><img class="metaAdd" src="images/fileTypes/picture.png" align="absmiddle" width="16" height="16"></button>
    </div>
</div>
<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">
<!--
function saveSettings(){
    $.ajax({
        url: "/saveSettings.cfm",
        data: {
            layout: encodeURIComponent(JSON.stringify(currentLayout)),
            imagebar: encodeURIComponent(JSON.stringify(currentImageBar)), 
            saveName: $('input[name=saveName]').val()
        },
        success: function(response){
            location.href = $.parseJSON(response).directory;
        }
    })
}
//-->
</SCRIPT>
<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" style="left:8%; position:absolute; top:99px; width:80%; display:none; border:1px solid #ffdab9;" id="customizeDialog">
    <div class="portlet-header ui-widget-header ui-corner-all" id="customizeHeader">
        <span class="ui-icon ui-icon-closethick" onClick="closeCustomize()"></span>
        <a>Customize MyRedditAll</a>
        <a href="#" onClick="$('#saveSettingsForm').toggle(); return false;" class="cufonize" style="color:#3F0; font-size:14px;">Save Settings</a>
        <span id="saveSettingsForm" style="display:none;">
            <input type="Text" name="saveName" size="30" class="ui-state-defalt" value="Save Name"> <img src="images/fileTypes/disk.png" style="cursor:pointer;" onClick="saveSettings()" width="16" height="16">
        </span>
    </div>
    <div class="portlet-content">
        <table border="0" cellpadding="0" cellspacing="3" width="100%">
            <tr>
                <td class="cufonize">Pick Wallpaper </td>
                <td colspan="3" style="text-align:left;">
                    <input type="button" value="Previous" class="ui-state-default" onClick="prevWallpaper()">
                    <input type="button" value="Next" class="ui-state-default" onClick="nextWallpaper()">
                   
                    <span class="cufonize">
                        Custom:
                        <input type="hidden" value="" size="5" id="customWallpaper">
                        <img src="images/fileTypes/picture.png" onClick="saveWallpaper($('#customWallpaper').val());" width="16" height="16">
                    </span>
                </td>
                <td class="cufonize">Color </td>
                <td>
                    <div id="colorSelector"><div></div></div>
                </td>
                <td class="cufonize">Search Sub Reddits</td>
                <td>
                    <input type="Text" name="feedName" size="30" class="ui-state-defalt">
                    <img src="images/fileTypes/add.png" class="imgIcon" id="addSubIcon" onClick="popupAdd(this,$('input[name=feedName]').val())" width="16" height="16">
                    <script type="text/javascript">
                        new Autocomplete("feedName", function() {
                            this.setValue = function( SubRedditTitle ) {
                                if (SubRedditTitle != ''){ 
                                    popupAdd($("#addSubIcon"),SubRedditTitle)
                                }
                            }
                            if (this.isModified) this.setValue("");
                            return "/findFeed.cfm?q=" + this.value;
                        });
                    </script>
                </td>

            </tr>
        </table>
    </div>
</div>

    <ul id="imageMenu" class="contextMenu">
        <li class="comments"><a href="#comments">View Comments</a></li>
        <li class="image separator"><a href="#image">View Image</a></li>
        <li class="link separator"><a href="#source">Find Source</a></li>
        <li class="link separator"><a href="#analyze">Error Analyze</a></li>
        <li class="link separator" id="copyLink"><a href="#copy">Copy To Share</a></li>
    </ul>
    
    <input type="hidden" id="clipboardContents">
    <!-- <script type="text/javascript"> Cufon.now(); </script> -->
    <div style="position:absolute; left:-99999px; top:-99999px;"><img src="" id="background"></div>
        <script type="text/javascript"> Cufon.now(); </script>
</body>

</html>
